#!/bin/bash

#PBS -N anu_dc_convert
#PBS -l ncpus=16
#PBS -l mem=16GB
#PBS -l walltime=3:00:00
#PBS -l jobfs=100GB
#PBS -q expresssr
#PBS -l wd
#PBS -P eu59
#PBS -l storage=gdata/eu59+gdata/dk92

module use /g/data/dk92/apps/Modules/modulefiles
module load NCI-ai-ml/24.11

python3 /g/data/eu59/FlowMOP/data/code/process_fcs_files.py \
    --base-dir /g/data/eu59/FlowMOP/data/ANUDC_16/FCS_files/ \
    --metadata /g/data/eu59/FlowMOP/data/ANUDC_16/anu_dc_metadata.xlsx \
    --output-dir /g/data/eu59/FlowMOP/data/ANUDC_16/parquet \
    --output-name heart_parquet \
    --workers 16 \
    --memory-limit 16GB \
    --chunk-size 100000